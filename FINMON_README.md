# üí∞ FinMon Module - Club Shift Reporting System

Telegram-–±–æ—Ç –º–æ–¥—É–ª—å –¥–ª—è —É–¥–æ–±–Ω–æ–π —Å–¥–∞—á–∏ —Å–º–µ–Ω –∞–¥–º–∏–Ω–∞–º–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö –∫–ª—É–±–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —Å Google Sheets.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ë—ã—Å—Ç—Ä–∞—è —Å–¥–∞—á–∞ —Å–º–µ–Ω** - –ü–æ—à–∞–≥–æ–≤—ã–π wizard —Å –ø—Ä–æ—Å—Ç—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —É—á—ë—Ç** - –ë–∞–ª–∞–Ω—Å—ã –∫–∞—Å—Å –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  
‚úÖ **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤** - –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏, –∑–∞—Ä–ø–ª–∞—Ç—ã, –ø—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã  
‚úÖ **–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è** - –ì–µ–π–º–ø–∞–¥—ã, –∏–≥—Ä—ã, —Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã  
‚úÖ **Google Sheets —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **–ö—Ä–∞—Å–∏–≤—ã–µ –æ—Ç—á—ë—Ç—ã** - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–º–æ–¥–∑–∏-–æ—Ç—á—ë—Ç—ã  
‚úÖ **–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** - –°–≤–æ–¥–∫–∏ –ø–æ –¥–æ—Ö–æ–¥–∞–º/—Ä–∞—Å—Ö–æ–¥–∞–º –∑–∞ –ø–µ—Ä–∏–æ–¥  

## üìã –ö–æ–º–∞–Ω–¥—ã

### –î–ª—è –≤—Å–µ—Ö –∞–¥–º–∏–Ω–æ–≤:
- `/shift` - –°–¥–∞—Ç—å —Å–º–µ–Ω—É (–ø–æ—à–∞–≥–æ–≤—ã–π wizard)
- `/balances` - –¢–µ–∫—É—â–∏–µ –±–∞–ª–∞–Ω—Å—ã –∫–∞—Å—Å
- `/shifts` - –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 —Å–º–µ–Ω

### –î–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤:
- `/summary` - –°–≤–æ–¥–∫–∞ –ø–æ –¥–æ—Ö–æ–¥–∞–º/—Ä–∞—Å—Ö–æ–¥–∞–º –∑–∞ –ø–µ—Ä–∏–æ–¥
  - –°–µ–≥–æ–¥–Ω—è
  - –ù–µ–¥–µ–ª—è
  - –ú–µ—Å—è—Ü
  - –í—Å—ë –≤—Ä–µ–º—è

## üìä –ü—Ä–∏–º–µ—Ä –æ—Ç—á—ë—Ç–∞ –æ —Å–º–µ–Ω–µ

```
[–†–∏–æ –æ—Ñ–∏—Ü] ‚òÄÔ∏è –£—Ç—Ä–æ 20.10.2025
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üí∞ –í—ã—Ä—É—á–∫–∞:
  –ù–∞–ª–∏—á–Ω—ã–µ: 2,640 ‚ÇΩ
  –ë–µ–∑–Ω–∞–ª (–æ—Å–Ω): 5,547 ‚ÇΩ
  QR-–∫–æ–¥: 1,680 ‚ÇΩ
  –ë–µ–∑–Ω–∞–ª (–Ω–æ–≤–∞—è): 0 ‚ÇΩ
  üìä –ò—Ç–æ–≥–æ: 9,867 ‚ÇΩ

üè¶ –û—Å—Ç–∞—Ç–∫–∏ –Ω–∞ –∫–æ–Ω–µ—Ü —Å–º–µ–Ω—ã:
  –°–µ–π—Ñ: 927 ‚ÇΩ
  –ö–æ—Ä–æ–±–∫–∞: 5,124 ‚ÇΩ
  –¢–æ–≤–∞—Ä–∫–∞ (–Ω–∞–ª): 1,000 ‚ÇΩ

üí∏ –†–∞—Å—Ö–æ–¥—ã:
  –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏: 650 ‚ÇΩ
  –ó–∞—Ä–ø–ª–∞—Ç—ã: 3,000 ‚ÇΩ
  –ü—Ä–æ—á–∏–µ: 0 ‚ÇΩ
  üìä –ò—Ç–æ–≥–æ: 3,650 ‚ÇΩ

üéÆ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å:
  –ì–µ–π–º–ø–∞–¥—ã: 153 —à—Ç (–≤ —Ä–µ–º–æ–Ω—Ç–µ: 3, —Ç—Ä–µ–±—É–µ—Ç—Å—è: 3)
  –ò–≥—Ä: 31 —à—Ç

üßª –•–æ–∑—è–π—Å—Ç–≤–æ:
  –¢—É–∞–ª–µ—Ç–∫–∞: ‚úÖ –µ—Å—Ç—å
  –ü–æ–ª–æ—Ç–µ–Ω—Ü–∞: ‚ùå –Ω–µ—Ç

üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:
  –ù–æ–≤–∞—è –∫–∞—Å—Å–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:
- `finmon_clubs` - –°–ø–∏—Å–æ–∫ –∫–ª—É–±–æ–≤
- `finmon_shifts` - –°–º–µ–Ω—ã
- `finmon_cashes` - –ë–∞–ª–∞–Ω—Å—ã –∫–∞—Å—Å

–ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∫–ª—é—á–∞—é—Ç 2 –∫–ª—É–±–∞ (–†–∏–æ, –ú–∏—á—É—Ä–∏–Ω—Å–∫–∞—è) √ó 2 —Ç–∏–ø–∞ (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è, –∫–æ—Ä–æ–±–∫–∞).

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è Google Sheets —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
GOOGLE_SA_JSON=/path/to/service-account.json
FINMON_SHEET_NAME=ClubFinance
OWNER_TG_IDS=your_telegram_id
```

–ë–µ–∑ Google Sheets –º–æ–¥—É–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ —Ç–æ–ª—å–∫–æ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

### 3. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –º–æ–¥—É–ª—è

–ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ `bot.py` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
modules/finmon/
‚îú‚îÄ‚îÄ __init__.py           # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è handlers
‚îú‚îÄ‚îÄ models.py             # Pydantic –º–æ–¥–µ–ª–∏ (Club, Shift, CashBalance)
‚îú‚îÄ‚îÄ db.py                 # SQLite –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ wizard.py             # FSM wizard –¥–ª—è –≤–≤–æ–¥–∞
‚îú‚îÄ‚îÄ sheets.py             # Google Sheets —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
‚îî‚îÄ‚îÄ formatters.py         # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤

migrations/
‚îî‚îÄ‚îÄ finmon_001_init.sql   # SQL —Ç–∞–±–ª–∏—Ü—ã
```

## üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### finmon_clubs
–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª—É–±–∞—Ö –∏ —Ç–∏–ø–∞—Ö –∫–∞—Å—Å.

### finmon_shifts
–û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ —Å–º–µ–Ω:
- –í—ã—Ä—É—á–∫–∞ (–Ω–∞–ª–∏—á–Ω—ã–µ, –±–µ–∑–Ω–∞–ª, QR, –Ω–æ–≤–∞—è –∫–∞—Å—Å–∞)
- –û—Å—Ç–∞—Ç–∫–∏ (—Å–µ–π—Ñ, –∫–æ—Ä–æ–±–∫–∞, —Ç–æ–≤–∞—Ä–∫–∞)
- –†–∞—Å—Ö–æ–¥—ã (–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏, –∑–∞—Ä–ø–ª–∞—Ç—ã, –ø—Ä–æ—á–∏–µ)
- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (–≥–µ–π–º–ø–∞–¥—ã, –∏–≥—Ä—ã)
- –•–æ–∑—è–π—Å—Ç–≤–æ (—Ç—É–∞–ª–µ—Ç–∫–∞, –ø–æ–ª–æ—Ç–µ–Ω—Ü–∞)
- –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### finmon_cashes
–¢–µ–∫—É—â–∏–µ –±–∞–ª–∞–Ω—Å—ã –∫–∞—Å—Å (–æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Å–¥–∞—á–∏ —Å–º–µ–Ω—ã

1. **–í—ã–±–æ—Ä –∫–ª—É–±–∞** - Inline –∫–Ω–æ–ø–∫–∏ —Å –≤—ã–±–æ—Ä–æ–º –∫–ª—É–±–∞
2. **–í—Ä–µ–º—è —Å–º–µ–Ω—ã** - –£—Ç—Ä–æ –∏–ª–∏ –í–µ—á–µ—Ä
3. **–í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö** - –ü–æ—à–∞–≥–æ–≤—ã–π –≤–≤–æ–¥ –≤—Å–µ—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π:
   - –í—ã—Ä—É—á–∫–∞ (4 –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è)
   - –û—Å—Ç–∞—Ç–∫–∏ (3 –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è)
   - –†–∞—Å—Ö–æ–¥—ã (3 –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è)
   - –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (4 –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è)
   - –•–æ–∑—è–π—Å—Ç–≤–æ (2 –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è)
   - –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
4. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** - –ö—Ä–∞—Å–∏–≤–∞—è —Å–≤–æ–¥–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –ó–∞–ø–∏—Å—å –≤ –ë–î + —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Google Sheets

## üìà Google Sheets

–ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ Google Sheets:

### –õ–∏—Å—Ç "Shifts"
–í—Å–µ —Å–º–µ–Ω—ã —Å –ø–æ–ª–Ω–æ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π.

### –õ–∏—Å—Ç "Balances" 
–¢–µ–∫—É—â–∏–µ –±–∞–ª–∞–Ω—Å—ã –≤—Å–µ—Ö –∫–∞—Å—Å.

### –õ–∏—Å—Ç "Summary"
–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç –º–æ–¥—É–ª—è:

```bash
python3 test_finmon_basic.py
```

–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (Pydantic)
- ‚úÖ –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤
- ‚úÖ –°–≤–æ–¥–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –¢–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—ã –≤–∏–¥—è—Ç `/summary` —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ê–¥–º–∏–Ω—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–º–µ–Ω—ã –≤ `/shifts`
- –í–ª–∞–¥–µ–ª—å—Ü—ã –≤–∏–¥—è—Ç –≤—Å–µ —Å–º–µ–Ω—ã
- Google Sheets credentials —Ö—Ä–∞–Ω—è—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ú–æ–¥—É–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Google Sheets (graceful degradation)
- –í—Å–µ –¥–∞—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ ISO —Ñ–æ—Ä–º–∞—Ç–µ
- –°—É–º–º—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ REAL (—Å –∫–æ–ø–µ–π–∫–∞–º–∏)
- –ë—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è: 0 = –Ω–µ—Ç, 1 = –µ—Å—Ç—å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ —Ç—ã—Å—è—á

## üöÄ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

–í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –º–æ–¥—É–ª—è:
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ –≤ PDF
- [ ] –ì—Ä–∞—Ñ–∏–∫–∏ –¥–æ—Ö–æ–¥–æ–≤/—Ä–∞—Å—Ö–æ–¥–æ–≤
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∏–∑–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–∞—Ö
- [ ] –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫—É–ø–æ–∫
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Å—Å–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ knowledge.db
3. –õ–æ–≥–∏ –±–æ—Ç–∞ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫
4. Google Sheets credentials (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)

---

**–í–µ—Ä—Å–∏—è**: 1.0  
**–î–∞—Ç–∞**: –û–∫—Ç—è–±—Ä—å 2025  
**–ê–≤—Ç–æ—Ä**: Club Assistant Bot Team
