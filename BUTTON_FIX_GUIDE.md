# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–Ω–æ–ø–æ–∫

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–º–µ–Ω—ã –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å–ø–∏—Å–∞–Ω–∏–π –∑–∞—Ä–ø–ª–∞—Ç—ã –±–æ—Ç –æ—Ç–≤–µ—á–∞–ª —á–µ—Ä–µ–∑ –Ω–µ–π—Ä–æ–Ω–∫—É –≤–º–µ—Å—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏–∏. –ö–Ω–æ–ø–∫–∏ "üîí –ó–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É" –∏ "üí∏ –°–ø–∏—Å–∞—Ç—å —Å –∫–∞—Å—Å—ã" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

## üîç –ü—Ä–∏—á–∏–Ω–∞
1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**: Conversation handlers –∏ MessageHandler –≤ `handle_message` –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª–∏
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫**: –ù–µ–π—Ä–æ–Ω–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–Ω—å—à–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–Ω–æ–ø–æ–∫
3. **–î—É–±–ª–∏—Ä—É—é—â–∏–µ entry points**: –ö–Ω–æ–ø–∫–∏ –±—ã–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ –≤ conversation handlers, –∏ –≤ `handle_message`

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ü–µ—Ä–µ–º–µ—Å—Ç–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É –∫–Ω–æ–ø–æ–∫ –≤ –Ω–∞—á–∞–ª–æ `handle_message`
```python
async def handle_message(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
    # FIRST: Check for reply keyboard buttons (highest priority)
    if text == "üîí –ó–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É":
        logger.info(f"üîí Close shift button pressed by user {user.id}")
        # ... –æ–±—Ä–∞–±–æ—Ç–∫–∞
        return
    elif text == "üí∏ –°–ø–∏—Å–∞—Ç—å —Å –∫–∞—Å—Å—ã":
        logger.info(f"üí∏ Add expense button pressed by user {user.id}")
        # ... –æ–±—Ä–∞–±–æ—Ç–∫–∞
        return
```

### 2. –£–±—Ä–∞–ª –¥—É–±–ª–∏—Ä—É—é—â–∏–µ entry points –∏–∑ conversation handlers
```python
# –ë—ã–ª–æ:
shift_handler = ConversationHandler(
    entry_points=[
        CommandHandler("shift", shift_wizard.cmd_shift),
        MessageHandler(filters.TEXT & filters.Regex("^(üîí –ó–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É|üí∞ –°–¥–∞—Ç—å —Å–º–µ–Ω—É)$"), shift_wizard.cmd_shift)
    ],
    # ...
)

# –°—Ç–∞–ª–æ:
shift_handler = ConversationHandler(
    entry_points=[
        CommandHandler("shift", shift_wizard.cmd_shift)
    ],
    # ...
)
```

### 3. –î–æ–±–∞–≤–∏–ª –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
```python
logger.info(f"üîí Close shift button pressed by user {user.id}")
logger.info(f"üí∏ Add expense button pressed by user {user.id}")
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –ö–Ω–æ–ø–∫–∏ "üîí –ó–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É" –∏ "üí∏ –°–ø–∏—Å–∞—Ç—å —Å –∫–∞—Å—Å—ã" —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ù–µ–π—Ä–æ–Ω–∫–∞ –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–Ω–æ–ø–æ–∫
- ‚úÖ Conversation handlers —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–º–∞–Ω–¥, –∞ –Ω–µ –¥–ª—è –∫–Ω–æ–ø–æ–∫
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üîÑ –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏
1. **–ö–Ω–æ–ø–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. **–ö–æ–º–∞–Ω–¥—ã** (/start, /help –∏ —Ç.–¥.)
3. **Conversation handlers** (–¥–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤)
4. **–ù–µ–π—Ä–æ–Ω–∫–∞** (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –≤—ã—à–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ)

–¢–µ–ø–µ—Ä—å –≤—Å–µ –∫–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! üéâ
