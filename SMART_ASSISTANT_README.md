# ๐ง Smart Assistant - ะฃะปัััะตะฝะฝะฐั ัะธััะตะผะฐ ะพะฑััะตะฝะธั ะฑะพัะฐ

## ๐ ะงัะพ ะฝะพะฒะพะณะพ?

ะฃะปัััะตะฝะฝะฐั RAG-ัะธััะตะผะฐ ะฝะฐ ะฑะฐะทะต **OpenAI GPT-4o-mini** ั ะธะฝะดะตะบัะฐัะธะตะน ะดะพะบัะผะตะฝัะพะฒ ะธ ะบะพะฝัะตะบััะฝัะผ ะฟะพะฝะธะผะฐะฝะธะตะผ.

### โจ ะะพะฒัะต ะฒะพะทะผะพะถะฝะพััะธ:

1. **๐ ะะฝะดะตะบัะฐัะธั .md ัะฐะนะปะพะฒ** - ะฑะพั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะธะทััะฐะตั ะฒัะต ะธะฝััััะบัะธะธ ะธ ะดะพะบัะผะตะฝัั
2. **๐ง ะฃะผะฝัะต ะพัะฒะตัั** - ะบะพะฝัะตะบััะฝะพะต ะฟะพะฝะธะผะฐะฝะธะต ั ััััะพะผ ะธััะพัะธะธ ัะฐัะฐ
3. **๐ฏ ะะตะถะธะผั ะพัะฒะตัะฐ** - strict, auto, creative, docs
4. **๐ ะััะพัะธั ัะพะพะฑัะตะฝะธะน** - ััะธััะฒะฐะตั ะบะพะฝัะตะบัั ัะฐะทะณะพะฒะพัะฐ
5. **๐ ะฃะปัััะตะฝะฝัะน ะฟะพะธัะบ** - ัะพัะฝะตะต ะฝะฐัะพะดะธั ะธะฝัะพัะผะฐัะธั

---

## ๐ ะัััััะน ััะฐัั

### 1. ะะฝะดะตะบัะฐัะธั ะดะพะบัะผะตะฝัะพะฒ

ะะตัะตะด ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะฝัะถะฝะพ ะฟัะพะธะฝะดะตะบัะธัะพะฒะฐัั ะฒะฐัะธ .md ัะฐะนะปั:

```bash
# ะ Telegram (ัะพะปัะบะพ owner):
/index_docs

# ะะปะธ ัะตัะตะท ัะบัะธะฟั:
cd /opt/club_assistant
python3 index_documents.py
```

ะะพั ะฟัะพะธะฝะดะตะบัะธััะตั ะฒัะต ัะฐะนะปั:
- `README.md`
- `DEPLOYMENT_GUIDE.md`
- `ACCOUNTING_INTEGRATION_README.md`
- ะ ะฒัะต ะพััะฐะปัะฝัะต .md ัะฐะนะปั ะฒ ะฟัะพะตะบัะต

### 2. ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะบะพะผะฐะฝะดั /ask

```
/ask <ะฒะฐั ะฒะพะฟัะพั>
```

**ะัะธะผะตัั:**

```
/ask ะบะฐะบ ะทะฐะบัััั ัะผะตะฝั?
/ask ััะพ ัะฐะบะพะต ัะธะฝะผะพะฝ?
/ask ะธะฝััััะบัะธั ะฟะพ V2Ray
```

---

## ๐๏ธ ะะตะถะธะผั ัะฐะฑะพัั

### 1. Auto (ะฐะฒัะพะผะฐัะธัะตัะบะธะน) - ะฟะพ ัะผะพะปัะฐะฝะธั

ะะพั ัะฐะผ ะฒัะฑะธัะฐะตั ะปัััะธะน ะฟะพะดัะพะด:
- ะัะปะธ ะตััั ัะพัะฝัะน ะพัะฒะตั ะฒ ะฑะฐะทะต โ ัััะพะณะธะน RAG
- ะัะปะธ ะฒะพะฟัะพั ะพะฑัะธะน โ ะณะธะฑัะธะดะฝัะน ะพัะฒะตั (RAG + GPT)
- ะัะปะธ ะฟัะธะฒะตัััะฒะธะต โ ะฝะตะฟัะธะฝัะถะดัะฝะฝัะน ะพัะฒะตั

```
/ask ะบะฐะบ ัะฐะฑะพัะฐะตั ะฑะพั?
```

### 2. Strict (ัััะพะณะธะน) - ัะพะปัะบะพ ะฑะฐะทะฐ ะทะฝะฐะฝะธะน

ะัะฒะตั **ัะพะปัะบะพ** ะธะท ะฟัะพะธะฝะดะตะบัะธัะพะฒะฐะฝะฝัั ะดะพะบัะผะตะฝัะพะฒ ะธ ะฑะฐะทั ะทะฝะฐะฝะธะน.
ะะต ะฟัะธะดัะผัะฒะฐะตั, ัะตััะฝะพ ะณะพะฒะพัะธั ะตัะปะธ ะฝะต ะทะฝะฐะตั.

```
/ask ะณะดะต ะฝะฐัะพะดะธััั ะบะฝะพะฟะบะฐ ะทะฐะบัััะธั ัะผะตะฝั? strict
```

### 3. Creative (ะบัะตะฐัะธะฒะฝัะน)

ะะพะปะตะต ัะฐะทะฒััะฝัััะต ะพัะฒะตัั ั ะฟัะธะผะตัะฐะผะธ ะธ ะฟะพััะฝะตะฝะธัะผะธ.
ะัะฟะพะปัะทัะตั ัะฒะพะธ ะทะฝะฐะฝะธั + ะบะพะฝัะตะบัั ะธะท ะฑะฐะทั.

```
/ask ัะฐััะบะฐะถะธ ะฟัะพ ัะธััะตะผั ัะผะตะฝ creative
```

### 4. Docs (ัะพะปัะบะพ ะดะพะบัะผะตะฝัะฐัะธั)

ะะพะธัะบ **ัะพะปัะบะพ** ะฒ ะฟัะพะธะฝะดะตะบัะธัะพะฒะฐะฝะฝัั .md ัะฐะนะปะฐั.

```
/ask ะฝะฐะนะดะธ ะธะฝัะพัะผะฐัะธั ะฟัะพ ะฑััะณะฐะปัะตัะธั docs
```

---

## ๐ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั?

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะดะฐัั ะฒะพะฟัะพั        โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  1. ะกะพะทะดะฐะฝะธะต embedding (OpenAI)     โ
โ     text-embedding-3-small          โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  2. ะะพะธัะบ ะฒ FAISS ะฒะตะบัะพัะฝะพะน ะะ      โ
โ     - ะะฐะทะฐ ะทะฝะฐะฝะธะน (Q&A)             โ
โ     - ะััะพัะธั ัะพะพะฑัะตะฝะธะน             โ
โ     - ะะพะบัะผะตะฝัั (.md ัะฐะนะปั)         โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  3. ะะปะฐััะธัะธะบะฐัะธั ะฒะพะฟัะพัะฐ           โ
โ     - ะัะธะฒะตัััะฒะธะต                   โ
โ     - ะัะพัะตะดััะฝัะน                   โ
โ     - ะะฝัะพัะผะฐัะธะพะฝะฝัะน                โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  4. ะะตะฝะตัะฐัะธั ะพัะฒะตัะฐ (GPT-4o-mini)  โ
โ     System Prompt + ะะพะฝัะตะบัั +      โ
โ     + ะััะพัะธั + ะะฐะนะดะตะฝะฝัะต docs      โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  5. ะัะฒะตั ะฟะพะปัะทะพะฒะฐัะตะปั ั ะผะตัะบะพะน     โ
โ     ๐ ะะท ะฑะฐะทั ะทะฝะฐะฝะธะน               โ
โ     ๐ง ะฃะผะฝัะน ะพัะฒะตั (RAG + GPT)      โ
โ     ๐จ ะัะตะฐัะธะฒะฝัะน ะพัะฒะตั             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ง ะะฐัััะพะนะบะฐ

### ะะพะฝัะธะณััะฐัะธั ะฒ `config.json`

```json
{
  "openai_api_key": "sk-...",
  "gpt_model": "gpt-4o-mini"
}
```

**ะะพะดะตะปะธ:**
- `gpt-4o-mini` - ัะตะบะพะผะตะฝะดัะตััั (ะฑััััะพ, ะดััะตะฒะพ, ะบะฐัะตััะฒะตะฝะฝะพ)
- `gpt-4o` - ะดะพัะพะถะต, ะปัััะต ะดะปั ัะปะพะถะฝัั ะทะฐะดะฐั
- `gpt-3.5-turbo` - ะดะตัะตะฒะปะต, ะฝะพ ััะถะต ะบะฐัะตััะฒะพ

### Embeddings

ะัะฟะพะปัะทัะตััั `text-embedding-3-small` (1536 ัะฐะทะผะตัะฝะพััั):
- โ ะััะตะฒะพ (~$0.02 ะทะฐ 1M ัะพะบะตะฝะพะฒ)
- โ ะััััะพ
- โ ะะฐัะตััะฒะตะฝะฝะพ ะดะปั ะฟะพะธัะบะฐ

---

## ๐ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะะฐะทะพะฒัะต ะฒะพะฟัะพัั

```
/ask ะฟัะธะฒะตั
โ ะัะธะฒะตั! ะงะตะผ ะผะพะณั ะฟะพะผะพัั?

/ask ััะพ ัั ัะผะตะตัั?
โ ๐ง ะฃะผะฝัะน ะพัะฒะตั (RAG + GPT):
ะฏ - ัะผะฝัะน ะฟะพะผะพัะฝะธะบ ะบะพะผะฟัััะตัะฝะพะณะพ ะบะปัะฑะฐ...
```

### ะัะพัะตะดััะฝัะต ะฒะพะฟัะพัั

```
/ask ะบะฐะบ ะทะฐะบัััั ัะผะตะฝั?
โ ๐ ะะท ะฑะฐะทั ะทะฝะฐะฝะธะน:

1. ะะฐะถะผะธัะต ะบะฝะพะฟะบั "๐ ะะฐะบัััั ัะผะตะฝั"
2. ะะฒะตะดะธัะต ัะฐะบัะธัะตัะบัั ะฒััััะบั...
...
```

### ะะพะธัะบ ะฒ ะดะพะบัะผะตะฝัะฐัะธะธ

```
/ask ะฝะฐะนะดะธ ะธะฝัะพัะผะฐัะธั ะฟัะพ accounting docs
โ ๐ ะะท ะฑะฐะทั ะทะฝะฐะฝะธะน:

ะะฝัะพัะผะฐัะธั ะธะท ACCOUNTING_INTEGRATION_README.md:
...
```

---

## ๐ฏ ะัะตะธะผััะตััะฒะฐ ะฝะพะฒะพะน ัะธััะตะผั

### ะะพ ััะฐะฒะฝะตะฝะธั ัะพ ััะฐััะผ RAGAnswerer:

| ะคัะฝะบัะธั | ะกัะฐัะฐั ัะธััะตะผะฐ | ะะพะฒะฐั SmartAssistant |
|---------|----------------|----------------------|
| **ะััะพัะฝะธะบะธ** | ะขะพะปัะบะพ Q&A ะฑะฐะทะฐ | Q&A + ะะพะบัะผะตะฝัั + ะััะพัะธั |
| **ะะพะฝัะตะบัั** | ะะตั | ะััะพัะธั ัะฐัะฐ |
| **ะะตะถะธะผั** | 1 (fixed) | 4 (auto, strict, creative, docs) |
| **ะะปะฐััะธัะธะบะฐัะธั** | ะะตั | ะะฒัะพะผะฐัะธัะตัะบะฐั |
| **ะัะพะผะฟัั** | 1 generic | ะะดะฐะฟัะธะฒะฝัะต ะฟะพะด ัะธะฟ ะฒะพะฟัะพัะฐ |
| **ะะพะบัะผะตะฝัั** | ะะตั | .md ัะฐะนะปั ะธะฝะดะตะบัะธัััััั |

---

## ๐ก ะกะพะฒะตัั ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### 1. ะะตะณัะปััะฝะพ ะพะฑะฝะพะฒะปัะนัะต ะธะฝะดะตะบั

ะะพัะปะต ะธะทะผะตะฝะตะฝะธั .md ัะฐะนะปะพะฒ:
```
/index_docs
```

### 2. ะัะฟะพะปัะทัะนัะต ัะตะถะธะผั

- **ะัะถะฝะฐ ัะพัะฝะฐั ะธะฝััััะบัะธั?** โ `/ask <ะฒะพะฟัะพั> strict`
- **ะฅะพัะธัะต ัะฐะทะฒััะฝัััะน ะพัะฒะตั?** โ `/ask <ะฒะพะฟัะพั> creative`
- **ะัะตัะต ะฒ ะดะพะบัะผะตะฝัะฐั?** โ `/ask <ะฒะพะฟัะพั> docs`

### 3. ะคะพัะผัะปะธััะนัะต ะฒะพะฟัะพัั ัััะบะพ

โ ะะปะพัะพ:
```
/ask ัะผะตะฝะฐ
```

โ ะฅะพัะพัะพ:
```
/ask ะบะฐะบ ะทะฐะบัััั ัะผะตะฝั?
/ask ะณะดะต ะฟะพัะผะพััะตัั ััะฐััั ัะผะตะฝั?
/ask ััะพ ะดะตะปะฐัั ะตัะปะธ ะพัะธะฑะบะฐ ะฟัะธ ะทะฐะบัััะธะธ ัะผะตะฝั?
```

---

## ๐ ะกัะฐัะธััะธะบะฐ ะธ ะผะพะฝะธัะพัะธะฝะณ

### ะะพัะผะพััะตัั ััะฐัะธััะธะบั:

```
/stats
```

ะะพะบะฐะถะตั:
- ๐ ะะพะปะธัะตััะฒะพ ะทะฐะฟะธัะตะน ะฒ ะฑะฐะทะต ะทะฝะฐะฝะธะน
- ๐ข ะะพะปะธัะตััะฒะพ ะฒะตะบัะพัะพะฒ ะฒ ะธะฝะดะตะบัะต
- ๐ค ะกัะฐััั SmartAssistant

### ะะพะณะธ

ะัะต ะทะฐะฟัะพัั ะปะพะณะธัััััั:
```
โ /ask from 123456: 'ะบะฐะบ ะทะฐะบัััั ัะผะตะฝั?' (mode=auto)
โ Answer: source=hybrid, conf=0.82
```

---

## ๐๏ธ Troubleshooting

### ะะพั ะฝะต ะฝะฐัะพะดะธั ะธะฝัะพัะผะฐัะธั ะธะท ะดะพะบัะผะตะฝัะพะฒ

**ะะตัะตะฝะธะต:**
1. ะัะพะฒะตัััะต, ััะพ ะดะพะบัะผะตะฝัั ะฟัะพะธะฝะดะตะบัะธัะพะฒะฐะฝั: `/index_docs`
2. ะัะฟะพะปัะทัะนัะต ัะตะถะธะผ `docs`: `/ask <ะฒะพะฟัะพั> docs`

### ะัะฒะตัั ะฝะต ัะพัะฝัะต

**ะะตัะตะฝะธะต:**
1. ะัะฟะพะปัะทัะนัะต ัะตะถะธะผ `strict` ะดะปั ัััะพะณะพะณะพ RAG
2. ะะพะฑะฐะฒััะต ะฑะพะปััะต Q&A ะฒ ะฑะฐะทั ัะตัะตะท `/learn`

### ะะพะปะณะพ ะพัะฒะตัะฐะตั

**ะัะธัะธะฝั:**
- ะะตัะฒัะน ะทะฐะฟัะพั ะฟะพัะปะต ะทะฐะฟััะบะฐ (ะทะฐะณััะทะบะฐ ะธะฝะดะตะบัะฐ)
- ะะพะปััะพะน ะธะฝะดะตะบั ะดะพะบัะผะตะฝัะพะฒ
- ะะตะดะปะตะฝะฝัะน OpenAI API

**ะะตัะตะฝะธะต:**
- ะัะฟะพะปัะทัะนัะต `gpt-4o-mini` (ะฑััััะตะต)
- ะะฟัะธะผะธะทะธััะนัะต ัะฐะทะผะตั ะดะพะบัะผะตะฝัะพะฒ

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะะพะผะฐะฝะดั ะดะพัััะฟะฝัะต ัะพะปัะบะพ owner:

- `/index_docs` - ะธะฝะดะตะบัะฐัะธั ะดะพะบัะผะตะฝัะพะฒ

### ะะพะณะธัะพะฒะฐะฝะธะต

ะัะต ะทะฐะฟัะพัั ะบ SmartAssistant ะปะพะณะธัััััั ั:
- User ID
- ะะพะฟัะพั
- ะะตะถะธะผ
- ะะตะทัะปััะฐั (source type, confidence)

---

## ๐ ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะััะธัะตะบัััะฐ

```
smart_assistant.py
โโโ SmartAssistant
โ   โโโ index_markdown_files()    # ะะฝะดะตะบัะฐัะธั .md
โ   โโโ answer_with_context()     # ะฃะผะฝัะน ะพัะฒะตั
โ   โโโ _classify_question()      # ะะปะฐััะธัะธะบะฐัะธั
โ   โโโ _strict_rag_answer()      # ะกััะพะณะธะน RAG
โ   โโโ _hybrid_answer()          # RAG + GPT
โ   โโโ _creative_answer()        # ะัะตะฐัะธะฒะฝัะน
โ   โโโ _casual_answer()          # ะะตะฟัะธะฝัะถะดัะฝะฝัะน
```

### ะะฐะฒะธัะธะผะพััะธ

- `openai` - API ะดะปั GPT ะธ embeddings
- `faiss` - ะฒะตะบัะพัะฝัะน ะฟะพะธัะบ
- `numpy` - ัะฐะฑะพัะฐ ั ะฒะตะบัะพัะฐะผะธ
- `sqlite3` - ะฑะฐะทะฐ ะทะฝะฐะฝะธะน

### ะะฐะทะฐ ะดะฐะฝะฝัั

ะขะฐะฑะปะธัั:
- `knowledge` - Q&A ะฑะฐะทะฐ
- `message_history` - ะธััะพัะธั ัะพะพะฑัะตะฝะธะน
- ะะพะบัะผะตะฝัั ััะฐะฝัััั ะบะฐะบ ัะฟะตัะธะฐะปัะฝัะต ะทะฐะฟะธัะธ ั `category='documentation'`

---

## ๐ Roadmap

### ะะปะฐะฝะธััะตััั:

- [ ] Fine-tuning ะฝะฐ ะฒะฐัะธั ะดะฐะฝะฝัั
- [ ] ะะพะดะดะตัะถะบะฐ ะธะทะพะฑัะฐะถะตะฝะธะน ะฒ ะดะพะบัะผะตะฝัะฐั
- [ ] ะญะบัะฟะพัั ะฑะฐะทั ะทะฝะฐะฝะธะน
- [ ] ะะตะฑ-ะธะฝัะตััะตะนั ะดะปั ัะฟัะฐะฒะปะตะฝะธั
- [ ] A/B ัะตััะธัะพะฒะฐะฝะธะต ัะฐะทะฝัั ะฟัะพะผะฟัะพะฒ
- [ ] Feedback loop (ะพัะตะฝะบะฐ ะพัะฒะตัะพะฒ)

---

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะปะธ ััะพ-ัะพ ะฝะต ัะฐะฑะพัะฐะตั:

1. ะัะพะฒะตัััะต ะปะพะณะธ: `journalctl -u club_assistant -n 100`
2. ะัะพะฒะตัััะต OpenAI API key ะฒ `config.json`
3. ะฃะฑะตะดะธัะตัั ััะพ ะฟัะพะธะฝะดะตะบัะธัะพะฒะฐะฝั ะดะพะบัะผะตะฝัั: `/index_docs`

---

## ๐ ะะธัะตะฝะทะธั

ะงะฐััั ะฟัะพะตะบัะฐ Club Assistant Bot v4.24

---

**ะัะธััะฝะพะณะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั! ๐**
